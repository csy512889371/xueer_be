# 关于学而的用户系统
学而的用户注册有两个api，对应的路由分别是"/hello/privateship/","/api/v1.0/register/"。

前者使用前端传来的用户的邮箱信息，然后根据邮箱信息到木犀auth中查找用户信息：用户名，然后使用muxi304作为密码字段的占位符存到学而自己的数据库中。这个api对于没有查到的情况也没有做处理，对用户的其他字段的信息也没有处理，也不符合auth同一登录的逻辑，所以我现在很迷糊。

后者则是一个普通的注册api，收集前端传来的用户信息，然后存在学而自己的数据库中。

后面的这个api存在bug(已修正),密码字段需要base64.b64encode一下，因为password_hash字段是在base64.b64decode(password)的基础上生成的。

PS:其实我觉得这里的encode,decode好像没什么意义:/  反而降低了效率!
但是由于是老前辈写的，必有其道理，所以我也不敢把它去掉。同时去掉的话也会影响到老用户的登录。


我现在不知道前端使用的是哪个api进行用户注册的，如果使用的是前者，显然是有问题的，如果使用的是后者，那么那个bug会导致用户验证密码时失败，也就无法登录。但是现在的事实是学而用户可以正常注册登录，但是后端的数据库中存储的普通用户的密码全是muxi304,管理员的密码是正常的。

也就是说学而的用户系统存在漏洞。








